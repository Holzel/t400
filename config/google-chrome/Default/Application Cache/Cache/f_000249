IH.prototype.lk=QR(144,g("F"));vN.prototype.lk=QR(143,function(){return M(this,1)});xN.prototype.lk=QR(142,function(){return M(this,1)});AN.prototype.lk=QR(141,function(){return M(this,1)});EN.prototype.lk=QR(140,function(){return M(this,1)});cm.prototype.Oo=QR(64,function(){return null!=C(this,1)});HAa.prototype.Oo=QR(63,function(){return null!=C(this,5)});tN.prototype.Oo=QR(62,function(){return Oe(this,3)});BN.prototype.Oo=QR(61,function(){return Oe(this,2)});
GN.prototype.Oo=QR(60,function(){return Oe(this,2)});HN.prototype.Oo=QR(59,function(){return Oe(this,2)});JN.prototype.Oo=QR(58,function(){return Oe(this,2)});function sTc(a,b){a.H=b};function tTc(a,b,c){switch(a){case 1:return a=c,a=void 0===a?"":a,a=(new pp("\n{include_sheet_name, select,\n    true {Query on {sheet_name}: can't connect. Review login credentials and\n        database name then try again.}\n    other {Can't connect. Review login credentials and database name then\n        try again.}}")).format({YQ:!!a,YS:a}),b&&(a+=" "+b),Di(a);case 3:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: review query and try again}\n    other {Review query and try again}}")).format({YQ:!!a,
YS:a}),b&&(a+=" "+b),Di(a);case 4:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: review database or table and try again}\n    other {Review database or table and try again}}")).format({YQ:!!a,YS:a}),b&&(a+=" "+b),Di(a);case 2:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: can't connect. Host not available.}\n    other {Can't connect. Host not available.}}")).format({YQ:!!a,YS:a}),b&&(a+=
" "+b),Di(a);case 5:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: query timed out}\n    other {Query timed out}}")).format({YQ:!!a,YS:a}),b&&(a+=" "+b),Di(a);case 7:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: Query results exceeded {max_rows} rows. Update\n        query and run again}\n    other {Query results exceeded {max_rows} rows. Update query and run\n        again}}")).format({YQ:!!a,
YS:a,CDc:uTc}),b&&(a+=" "+b),Di(a);default:return a=c,a=void 0===a?"":a,a=(new pp("{include_sheet_name, select,\n    true {Query on {sheet_name}: something's wrong. Please try again later.}\n    other {Something's wrong. Please try again later.}}")).format({YQ:!!a,YS:a}),b&&(a+=" "+b),Di(a)}}var uTc=(new mp(1)).format(5E3);function vTc(a,b){var c=wvc.getInstance();Au.call(this,a,c,b)}r(vTc,$W);function XZ(a,b){ks.call(this,"waffle-dataconnector-prompt",a,b);this.L=Zh();ws(this,null);vs(this,!0);this.C=new jxc("Continue");this.Qa(this.C);this.J=new vTc("Cancel");this.Qa(this.J)}r(XZ,ks);p=XZ.prototype;p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ha=function(){ks.prototype.Ha.call(this);var a=ps(this);this.J.render(a);this.C.render(a);Q(a,!0)};
p.Ra=function(){var a=this;ks.prototype.Ra.call(this);this.getHandler().V(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){ks.prototype.setVisible.call(this,a);a||this.reject()};p.Oa=function(){ks.prototype.Oa.call(this);this.reject()};function wTc(a,b){XZ.call(this,a,b)}r(wTc,XZ);wTc.prototype.Ra=function(){var a=this;XZ.prototype.Ra.call(this);this.getHandler().V(this.C,"action",function(){return a.resolve(0)})};function xTc(a,b,c){var d=new wTc;ls(d,"Refresh query failed");d.C.setContent("Fix it");d.J.setContent("Ok");ms(d,tTc(a,b,c));return d};function yTc(a){GT.call(this,a);this.F=!1}r(yTc,GT);yTc.prototype.Ha=function(){GT.prototype.Ha.call(this);Rr(this.getElement(),"waffle-progress-bar");Vr(this.getElement(),"waffle-indeterminate-progress-bar",this.F)};function zTc(a,b){a.F!=b&&(a.F=b,a.getElement()&&Vr(a.getElement(),"waffle-indeterminate-progress-bar",b))}yTc.prototype.fb=function(a){zTc(this,!1);GT.prototype.fb.call(this,a)};
function ATc(a,b){zTc(a,!1);var c={width:a.$a()+"%"},d={width:b+"%"};c=new et(a.Za("progress-bar-thumb"),1,c,d,{Kg:"width",duration:1,timing:"ease-in",hm:0});c.Oc("end",function(){GT.prototype.fb.call(a,b)});c.play()};function BTc(){return U('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>')};function CTc(){return U('<div class="'+V("waffle-dataconnector-dialog-progress-message")+'"><div class="'+V("waffle-dataconnector-dialog-progress-label")+'"></div><div class="'+V("waffle-dataconnector-dialog-progress-bar")+'"></div></div>')};function YZ(a,b){ks.call(this,"waffle-dataconnector-dialog",a,b);ws(this,null);this.yF(!1);vs(this,!0);this.Ba=[];this.ib=new jxc("Ok");this.Qa(this.ib);this.cb=new vTc("Cancel");this.Qa(this.cb);this.gb=new jw;this.Lb=tq(new sq,1).build();this.wb=this.Aa().Ha("DIV","waffle-dataconnector-dialog-error-message");this.Db=this.Aa().Ha("DIV","waffle-dataconnector-dialog-info-message");this.Ob=S(CTc);this.J=new yTc;zTc(this.J,!0);this.Qa(this.J)}r(YZ,ks);function DTc(a,b,c){ow(a.gb,a.ib,b,qw,c,a.Lb)}
function ETc(a){ow(a.gb,a.cb,QNa,qw,void 0,a.Lb)}function FTc(a,b){a.Wb()&&(Ur(a.La,a.Ba),Sr(a.La,b));a.Ba=b}
YZ.prototype.Ha=function(){ks.prototype.Ha.call(this);Sr(this.La,this.Ba);var a=ps(this),b=this.Aa().Ha("DIV","waffle-dataconnector-dialog-button-wrapper");a.appendChild(b);this.cb.render(b);this.ib.render(b);Q(a,!0);b=this.Aa().Ha("DIV","waffle-dataconnector-dialog-message-container",this.wb,this.Db,this.Ob);a.appendChild(b);this.J.render(this.Za("waffle-dataconnector-dialog-progress-bar"));qt(VEa(this),BTc)};
YZ.prototype.Ra=function(){ks.prototype.Ra.call(this);ZZ(this);Lr(this.wb,"live","polite");Lr(this.Db,"live","polite");Lr(this.Ob,"live","polite")};YZ.prototype.yF=function(a){ks.prototype.yF.call(this,a);rs(this,this.EW?0:.6)};function GTc(a,b){a=a.Za("waffle-dataconnector-dialog-error-message");Ji(a,b||Di(""));Q(a,!!b)}function HTc(a,b){a=a.Za("waffle-dataconnector-dialog-info-message");Ji(a,b||Di(""));Q(a,!!b)}
function ITc(a,b,c){fo(a.Za("waffle-dataconnector-dialog-progress-label"),b);null!=c&&ATc(a.J,c);Q(a.Za("waffle-dataconnector-dialog-progress-message"),!0)}function ZZ(a){GTc(a,null);HTc(a,null);a.J.fb(0);zTc(a.J,!0);Q(a.Za("waffle-dataconnector-dialog-progress-message"),!1)};function JTc(a){return U('<div class="'+V("waffle-material-labeledinput")+'"><div class="'+V("waffle-material-labeledinput-inputwrapper")+'"><span id="'+V(a.lMa)+'" class="'+V("waffle-material-labeledinput-label")+'">'+T(a.label)+'</span><input type="'+V(a.type)+'" class="'+V("waffle-material-labeledinput-input")+'" aria-labelledby="'+V(a.lMa)+'"/><div class="'+V("waffle-material-labeledinput-underline")+'"></div><div class="'+V("waffle-material-labeledinput-accentunderline")+'"></div></div><div class="'+
V("waffle-material-labeledinput-errorcontainer")+'"><span class="'+V("waffle-material-labeledinput-errormessage")+'"></span></div></div>')};function $Z(a,b,c,d,e){c=void 0===c?"float":c;d=void 0===d?"":d;R.call(this,e);this.Hc=a;this.J=b;this.F=c;this.H=d;this.D=this.C=null}r($Z,R);p=$Z.prototype;p.Ha=function(){this.La=S(JTc,{label:this.J,lMa:kb(),type:this.Hc})};p.Ra=function(){R.prototype.Ra.call(this);this.C=this.Za("waffle-material-labeledinput-input");this.Za("waffle-material-labeledinput-label");this.fb(this.H);KTc(this);LTc(this)};
function LTc(a){a.getHandler().V(a.C,"focus",function(){return a.yNa(!0)}).V(a.C,"blur",v(a.yNa,a,!1))}function a_(a,b){a.D=b?"":null;a.Wb()&&KTc(a)}function KTc(a){var b=a.Za("waffle-material-labeledinput-errormessage");fo(b,a.D||"");Vr(a.La,"waffle-material-labeledinput-error",na(a.D))}p.yNa=function(a){Vr(this.getElement(),"waffle-material-labeledinput-focus",a);MTc(this,a)};
function MTc(a,b){b=(void 0===b?!1:b)||""!=a.$a()||"fixed"==a.F;Vr(a.getElement(),"waffle-material-labeledinput-float",b)}p.$a=function(){return this.C.value};p.fb=function(a){this.C.value=a;MTc(this)};function NTc(a){var b=U,c='<div class="'+V("waffle-dataconnector-authenticateconnectionscreen")+'">'+U('<div class="'+V("waffle-dataconnector-authenticateconnectionscreen-sidebar")+'"><div class="'+V("waffle-dataconnector-authenticateconnectionscreen-icon")+'"><div class="'+V("database-icon")+'"></div></div></div>');a=U('<div class="'+V("waffle-dataconnector-authenticateconnectionscreen-form")+'"><h4 class="'+V("waffle-dataconnector-authenticateconnectionscreen-title")+'">'+T(a.HV)+'</h4><div class="'+
V("waffle-dataconnector-authenticateconnectionscreen-input-container")+'"></div></div>');return b(c+a+"</div>")};function OTc(a,b,c,d,e){c=c?c:ba();YZ.call(this,d,e);this.R=a;this.Ia=b;this.O=c;this.L=new $Z("text","Login ID");this.Qa(this.L);this.F=new $Z("password","Password");this.Qa(this.F);this.C=new tW;this.Qa(this.C);DTc(this,NNa);ETc(this)}r(OTc,YZ);OTc.prototype.Ha=function(){YZ.prototype.Ha.call(this);qt(this.Pb(),NTc,{HV:this.Ia})};
OTc.prototype.Ra=function(){YZ.prototype.Ra.call(this);var a=this.Za("waffle-dataconnector-authenticateconnectionscreen-input-container");this.L.render(a);this.F.render(a);this.C.render(this.getElement())};function PTc(a){var b=new Wub;O(b,1,a.R);var c=a.L.$a();O(b,2,c);a=a.F.$a();O(b,3,a);return b};function QTc(a){return U('<div class="'+V("waffle-dataconnector-bar")+'"><div class="'+V("waffle-dataconnector-bar-left")+'"><span class="'+V("waffle-dataconnector-bar-header")+'">'+T(a.HV)+'</span></div><div class="'+V("waffle-dataconnector-bar-right")+'"><span class="'+V("waffle-dataconnector-bar-timestamp")+'"></span></div></div>')};function RTc(a,b,c){DW.call(this,c);this.O=a;this.D=new jw;this.Fa(this.D);this.C=new Au(void 0,void 0,this.Aa());this.Qa(this.C);this.C.bf("waffle-dataconnector-bar-editquery-button");ow(this.D,this.C,VNa,qw);this.HL=new Au(void 0,void 0,this.Aa());this.Qa(this.HL);this.HL.bf("waffle-dataconnector-bar-refresh-button");ow(this.D,this.HL,cOa,qw);this.H=b;this.R=new STc}r(RTc,DW);RTc.prototype.Fra=function(){return S(QTc,{HV:ab(this.O,64)})};
RTc.prototype.Ra=function(){DW.prototype.Ra.call(this);var a=this.Za("waffle-dataconnector-bar-left");this.C.render(a);a=this.Za("waffle-dataconnector-bar-timestamp");or(this.HL,a);TTc(this,this.H)};RTc.prototype.Rha=n("waffle-dataconnector-bar-wrapper");RTc.prototype.focus=function(){this.La.focus()};function TTc(a,b){0>=b||(a.H=b,b="Last refreshed "+a.R.format(b),a=a.Za("waffle-dataconnector-bar-timestamp"),fo(a,b))}
function STc(){this.C=new Vw(1);this.D=new Vw(Yw.MONTH_DAY_MEDIUM);this.F=new Vw(7)}STc.prototype.format=function(a){a=new Date(a);var b=new Date;b=0<b.getFullYear()-a.getFullYear()?this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?"Today":this.D.format(a);a=this.F.format(a);return b+(", "+a)};function UTc(a,b,c){CW.call(this,"waffle-connectionbar-id",c);var d=this;sTc(this,function(){d.C.setVisible(!0,!0);uS()});this.J=a;this.D=b}r(UTc,CW);UTc.prototype.Bu=function(){CW.prototype.Bu.call(this);this.getHandler().V(this.D,"ca",this.F);this.rB()};UTc.prototype.LP=function(){return new RTc(this.J,VTc(this))};UTc.prototype.F=function(a){this.isDisposed()||a.qh!=QF(this.D.C)||TTc(this.C,VTc(this))};
function VTc(a){a=a.D.C.C.Jb().toString();return ritz_api.DbxApi.getLastExecutionTimeForSheet(a)};function WTc(a){var b='<div class="'+V("waffle-dataconnector-connectionconfirmationscreen-content")+'"><div class="'+V("waffle-dataconnector-connectionconfirmationscreen-access-security")+'" tabindex="0"><h3>Access &amp; security.</h3>';var c="";c=a.$La?c+"<p>Plx is an internal-only connection that's visible only to Googlers.</p><p>People outside of google.com will see Plx as an unnamed connection.</p>":c+"<p>Database passwords and user IDs are not shared amongst collaborators.</p>";c=U(c+"");b=b+
c+'</div><div class="'+V("waffle-dataconnector-connectionconfirmationscreen-data-visibility")+'" tabindex="0"><h3>Who can see data &amp; queries</h3>';c="<p>Users who can view the spreadsheet will be able to see the data.</p>";c=a.$La?c+"<p>Google users who can edit the spreadsheet will be able to view and modify the query.</p><p>Users outside of google.com who can view the spreadsheet will be able to view the data, but will not be able to view or refresh the query.</p>":c+"<p>Users who can edit the spreadsheet can view and modify the query only after they've signed into the database.</p>";
a=U(c+"");return U(""+(b+a+"</div></div>"))};function XTc(a,b,c,d){YZ.call(this,c,d);ls(this,"Connected");this.F=a;this.C=b;ETc(this);DTc(this,WNa)}r(XTc,YZ);XTc.prototype.Ha=function(){YZ.prototype.Ha.call(this);qt(this.Pb(),WTc,{$La:2==this.C})};function YTc(a){return U('<div class="'+V("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+V("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+V("waffle-dataconnector-connectioncard-body")+'"><div class="'+V("waffle-dataconnector-connectioncard-header")+'">'+T(a.HV)+"</div></div></div>")};function ZTc(a,b,c,d){this.tc=a;this.D=b;this.Hc=c;this.C=d}ZTc.prototype.getName=g("D");ZTc.prototype.getId=g("tc");ZTc.prototype.getType=g("Hc");function $Tc(){this.Hc=this.tc=this.D=null;this.C=!1}$Tc.prototype.Cf=function(a){this.D=a;return this};$Tc.prototype.Rf=function(a){this.tc=a;return this};$Tc.prototype.setType=function(a){this.Hc=a;return this};$Tc.prototype.build=function(){return new ZTc(this.tc,this.D,this.Hc,this.C)};function aUc(){}r(aUc,yu);aUc.prototype.Ha=function(a){a=a.hb();var b=S(YTc,{HV:a.getName()});Vr(b,"waffle-dataconnector-connectioncard-authenticated",a.C);return b};aUc.prototype.gc=n("waffle-dataconnector-connectioncard");wa(aUc);function bUc(a,b){Au.call(this,void 0,aUc.getInstance(),b);this.Ad(a);this.uf(8,!0)}r(bUc,Au);bUc.prototype.Ad=function(a){Au.prototype.Ad.call(this,a)};function cUc(){var a=""+('<div class="'+V("waffle-dataconnector-connectionmanager-content")+'"><div class="'+V("waffle-dataconnector-connectionmanager-connections")+'"><div class="'+V("waffle-dataconnector-connectionmanager-authorized")+'"></div><div class="'+V("waffle-dataconnector-connectionmanager-unauthorized")+'"><div class="'+V("waffle-dataconnector-connectionmanager-unauthorized-header")+'">Not signed in</div></div></div></div>');return U(a)};function dUc(a,b){YZ.call(this,a,b);ls(this,"Your connections");this.C=new vv;this.Fa(this.C);this.F=new R(this.Aa());this.Qa(this.F);this.L=new tW;this.Qa(this.L);DTc(this,Mx);ETc(this)}r(dUc,YZ);dUc.prototype.Ha=function(){YZ.prototype.Ha.call(this);qt(this.Pb(),cUc)};
dUc.prototype.Ra=function(){YZ.prototype.Ra.call(this);this.L.render(this.Za("waffle-dataconnector-connectionmanager-content"));this.F.kb(this.Za("waffle-dataconnector-connectionmanager-connections"));this.getHandler().V(this.F,"action",this.O).V(this.C,"select",this.R);eUc(this,!0)};function eUc(a,b){Vr(a.La,"waffle-dataconnector-connectionmanager-loading",b);uW(a.L,b)}dUc.prototype.O=function(a){a.stopPropagation();wv(this.C,a.target)};
dUc.prototype.R=function(){var a=this.C.hf();a=(a=a&&a)&&a.hb();Mx.fb(a)};function b_(a){R.apply(this,arguments)}r(b_,R);function fUc(){return U('<div class="'+V("waffle-dataconnector-createconnectionscreen-content")+'"><div class="'+V("waffle-dataconnector-createconnectionscreen-form-container")+'"></div><div class="'+V("waffle-dataconnector-createconnectionscreen-certpicker-container")+'"></div></div>')};function gUc(a){b_.call(this,a);this.H=new $Z("text","New name","float","Untitled connection");this.Qa(this.H);this.F=new $Z("text","JDBC URL");this.Qa(this.F);this.D=new $Z("text","Login ID");this.Qa(this.D);this.C=new $Z("password","Password");this.Qa(this.C)}r(gUc,b_);p=gUc.prototype;p.Ha=function(){this.La=Jn("DIV","waffle-dataconnector-jdbcconnectionform")};p.Ra=function(){b_.prototype.Ra.call(this);this.H.render(this.La);this.F.render(this.La);this.D.render(this.La);this.C.render(this.La)};
p.BNa=function(a){if(!this.isDisposed())switch(a){case 1:a=ja([this.D,this.C]);for(var b=a.next();!b.done;b=a.next())a_(b.value,!0)}};p.xza=function(){a_(this.H,!1);a_(this.F,!1);a_(this.D,!1);a_(this.C,!1)};p.HFa=function(){var a=new rN;a.Cf(this.H.$a());O(a,2,1);var b=new sN;O(b,1,3);var c=this.F.$a();O(b,10,c);c=this.D.$a();O(b,4,c);c=this.C.$a();O(b,5,c);O(a,3,b);return a};function hUc(a,b){b_.call(this,b);this.O=a;this.J=new $Z("text","New name","fixed","Untitled connection");this.Qa(this.J);this.H=new $Z("text","Hostname:");this.Qa(this.H);this.L=new $Z("text","Port (optional)");this.Qa(this.L);this.F=new $Z("text","Database name");this.Qa(this.F);this.D=new $Z("text","Login ID");this.Qa(this.D);this.C=new $Z("password","Password");this.Qa(this.C)}r(hUc,b_);p=hUc.prototype;p.Ha=function(){this.La=Jn("DIV","waffle-dataconnector-jdbcconnectionform")};
p.Ra=function(){b_.prototype.Ra.call(this);this.J.render(this.La);this.H.render(this.La);this.L.render(this.La);this.F.render(this.La);this.D.render(this.La);this.C.render(this.La)};p.BNa=function(a){if(!this.isDisposed())switch(a){case 1:a=ja([this.D,this.C]);for(var b=a.next();!b.done;b=a.next())a_(b.value,!0)}};p.xza=function(){a_(this.J,!1);a_(this.F,!1);a_(this.D,!1);a_(this.C,!1);a_(this.L,!1);a_(this.H,!1)};
p.HFa=function(){var a=new rN;a.Cf(this.J.$a());O(a,2,1);var b=new sN,c=this.H.$a(),d=this.L.$a();O(b,2,d?c+":"+d:c);O(b,1,this.O.C);c=this.F.$a();O(b,3,c);c=this.D.$a();O(b,4,c);c=this.C.$a();O(b,5,c);O(a,3,b);return a};function iUc(a,b,c,d){YZ.call(this,c,d);var e=this;ls(this,a);FTc(this,["waffle-dataconnector-createconnectionscreen"]);this.C=b;this.Qa(b);this.F=new tW;this.Qa(this.F);DTc(this,TNa,function(){return e.C.HFa()});ETc(this)}r(iUc,YZ);iUc.prototype.Ha=function(){YZ.prototype.Ha.call(this);qt(this.Pb(),fUc)};iUc.prototype.Ra=function(){YZ.prototype.Ra.call(this);this.C.render(this.Za("waffle-dataconnector-createconnectionscreen-form-container"));this.F.render(this.getElement())};function jUc(){this.C=null;this.Kc=new Wk}jUc.prototype.Yf=da("C");function kUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/createConnection"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(tN.Na(),c.Xe());c.Oo()?e(c):b(c)}),e).ye()})}
function lUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/createQuery"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(vN.Na(),c.Xe());3==c.lk().getState()?e(c):b(c)}),e).ye()})}
function mUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/previewQuery"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(xN.Na(),c.Xe());3==c.lk().getState()?e(c):b(c)}),e).ye()})}
function nUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/refreshSheet"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(AN.Na(),c.Xe());3==c.lk().getState()?e(c):b(c)}),e).ye()})}
function oUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/editQuery"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(EN.Na(),c.Xe());3==c.lk().getState()?e(c):b(c)}),e).ye()})}function pUc(a){return new Uh(function(b,c){mm(nm(km(hn(jn(a.C.Le("/dbx/listConnections"),"GET")),1).setTimeout(3E4).Df(["currentWorkbookOnly",!0]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(Qub.Na(),c.Xe());b(c)}),c).ye()})}
jUc.prototype.getTables=function(a){var b=this;this.Kc.Ci=!0;var c=dj(this.Kc.serialize(a));return new Uh(function(a,e){mm(nm(km(hn(jn(b.C.Le("/dbx/getTables"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){b.Kc.Ci=!1;c=b.Kc.fd(BN.Na(),c.Xe());c.Oo()?e(c):a(c)}),e).ye()})};
function qUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/getColumns"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(GN.Na(),c.Xe());c.Oo()?e(c):b(c)}),e).ye()})}
function rUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/hasCredentials"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(dvb.Na(),c.Xe());b(c)}),e).ye()})}function sUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/getQuery"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(IN.Na(),c.Xe());b(c)}),e).ye()})}
function tUc(a,b){a.Kc.Ci=!0;var c=dj(a.Kc.serialize(b));return new Uh(function(b,e){mm(nm(km(hn(jn(a.C.Le("/dbx/authenticateConnection"),"POST")),1).setTimeout(3E4).setContent(["data",c]),function(c){a.Kc.Ci=!1;c=a.Kc.fd(HN.Na(),c.Xe());c.Oo()?e(c):b(c)}),e).ye()})};function uUc(a,b,c,d){this.H=a;this.J=b;this.C=this.F=a;this.L=c||0;this.O=d||2}uUc.prototype.D=0;uUc.prototype.reset=function(){this.C=this.F=this.H;this.D=0};uUc.prototype.$a=g("F");function vUc(a,b,c,d){G.call(this);this.O=a;this.R=b;this.$=c;this.J=this.D=this.H=null;this.C=d||null;this.F=!1;this.L=new wUc}r(vUc,G);p=vUc.prototype;p.getId=function(){return Ea(this)};p.Oa=function(){this.stop();G.prototype.Oa.call(this)};p.start=function(){this.CNa(this.O);this.F=!0};p.stop=function(){this.F&&(this.F=!1,this.L.stop())};function xUc(a,b){a.H=b;return a}function yUc(a,b){a.D=b;return a}function zUc(a,b){a.J=b;return a}
p.CNa=function(a){var b=this;this.R.call(this.C,a).then(function(a){if(b.F){var c=b.$.call(b.C,a);if(c){b.J&&b.J.call(b.C,a);a=b.L;c=v(b.CNa,b,c);var e=a.C;e.C=Math.min(e.J,e.C*e.O);e.F=Math.min(e.J,e.C+(e.L?Math.round(e.L*(Math.random()-.5)*2*e.C):0));e.D++;20<a.C.D?a=!1:(e=1E3*a.C.$a(),a.D=di(c,e),a=!0);a||(a=Error("Polling timed out"),b.stop(),b.D&&b.D.call(b.C,a))}else b.stop(),b.H&&b.H.call(b.C,a)}},function(a){b.F&&(b.stop(),b.D&&b.D.call(b.C,a))})};
function wUc(){this.C=new uUc(1,60,.2,2);this.D=null}wUc.prototype.stop=function(){this.C.reset();ei(this.D);this.D=null};function AUc(a){this.C=a}function BUc(a,b){return new vUc(b,function(b){return lUc(a.C,b)},function(a){if(1==a.lk().getState()){var b=new uN;a=a.lk().getToken();O(b,3,a);return b}return null})}function CUc(a,b){return new vUc(b,function(b){return oUc(a.C,b)},function(a){if(1==a.lk().getState()){var b=new DN;a=a.lk().getToken();O(b,3,a);return b}return null})}
function DUc(a,b){return new vUc(b,function(b){return mUc(a.C,b)},function(a){if(1==a.lk().getState()){var b=new wN;a=a.lk().getToken();O(b,4,a);return b}return null})}function EUc(a,b){return new vUc(b,function(b){return nUc(a.C,b)},function(a){if(1==a.lk().getState()){var b=new zN;a=a.lk().getToken();O(b,2,a);return b}return null})};function FUc(){return U('<div class="'+V("waffle-dataconnector-queryeditor-content")+'"><div class="'+V("waffle-dataconnector-queryeditor-editor-pane")+'"></div><div class="'+V("waffle-dataconnector-queryeditor-preview-pane")+'"><div class="'+V("waffle-dataconnector-queryeditor-preview-canvas-wrapper")+'"></div><div class="'+V("waffle-dataconnector-queryeditor-preview-overlay")+'"><div class="'+V("waffle-dataconnector-queryeditor-preview-overlay-text")+'"></div></div></div></div>')};function c_(a,b,c,d,e,f,h){YZ.call(this,f,h);var k=this;ls(this,"Query Editor");FTc(this,["waffle-dataconnector-queryeditor"]);this.Yb=a;this.F=b;this.Qa(this.F);this.Ab=c;this.Vb=d;this.Kb=e;this.C=this.Aa().Ha("CANVAS");BJ(this.C);this.L=AJ(this.C);CJ(this.C,this.L,800,243);GUc(this);DTc(this,this.Ab,function(){return k.Vb(k.F.xia())});ETc(this);this.Kc=new Wk;this.O=null;this.Ia=!1;this.R=new mp(1)}r(c_,YZ);c_.prototype.Ha=function(){YZ.prototype.Ha.call(this);qt(this.Pb(),FUc)};
c_.prototype.Ra=function(){var a=this;YZ.prototype.Ra.call(this);this.F.render(this.Za("waffle-dataconnector-queryeditor-editor-pane"));ow(this.gb,this.F.zFa(),Lx,qw,function(){var b=new wN;O(b,1,a.Yb);var d=a.F.xia();O(b,2,d);O(b,3,30);return b});this.getHandler().V(this.F,"be",this.jb);var b=this.Za("waffle-dataconnector-queryeditor-preview-canvas-wrapper");b.appendChild(this.C);Rr(b,"native-scrollbar");Rr(b,"native-scrollbar-ltr");HUc(this);ZZ(this);this.jb()};
function IUc(a,b,c){var d=0;a.J.F||(ITc(a,"Executing query",100),d=1500);di(function(){a.O=c;a.Ia=5E3<M(b,3)||!!M(b,4);var d=M(b,2),f=Pe(d,1),h=Pe(d,2)+1;JUc(a,101*f+46,24*h+24);d=a.Kc.serialize(d);ritz_api.DbxApi.renderQueryPreview(d,a.L,a.Kb.C,JI,a.C.width,a.C.height,101,24);KUc(a,!1);ZZ(a);d=M(b,3);d=a.Ia?M(b,4)?"Query returns: more than "+(a.R.format(d)+(" rows of data. Please revise your query to return no more than "+(a.R.format(5E3)+" rows."))):"Query returns: "+(a.R.format(d)+(" rows of data. Please revise your query to return no more than "+
(a.R.format(5E3)+" rows."))):(new pp("{TOTAL_ROWS, plural, =0 {Query returns no results.}=1 {Query returns: 1 row of data.}other {Query returns: # rows of data.}}")).format({TOTAL_ROWS:d});HTc(a,Di(d));a.jb()},d)}c_.prototype.jb=function(){this.O?this.F.Ola(this.O)?KUc(this,!1):(LUc(this,"This preview is out of date. Please re-run your query."),KUc(this,!0)):(LUc(this,"No preview available."),KUc(this,!0));this.Ab.eb(this.O?!this.Ia&&this.F.Ola(this.O):!1);Lx.eb(this.F.QLa())};
function LUc(a,b){fo(a.Za("waffle-dataconnector-queryeditor-preview-overlay-text"),b);MUc(a,!!b)}function MUc(a,b){Q(a.Za("waffle-dataconnector-queryeditor-preview-overlay-text"),b)}function HUc(a){JUc(a,2672,744);ritz_api.DbxApi.renderBlankGrid(a.L,a.Kb.C,JI,26,30,101,24,2672,744);LUc(a,"No preview available.");KUc(a,!0)}function KUc(a,b){Vr(a.Za("waffle-dataconnector-queryeditor-preview-pane"),"waffle-dataconnector-queryeditor-preview-inactive",b)}
function JUc(a,b,c){a.C.style.width=b;a.C.style.height=c;CJ(a.C,a.L,b,c);GUc(a)}function NUc(a){ZZ(a);ITc(a,"Updating workbook")}function OUc(a,b){b=b.lk();ITc(a,"Updating workbook",M(b,5))}function GUc(a){a.L.fillStyle="#f3f3f3";a.L.fillRect(0,0,a.C.width,a.C.height)}function d_(a){R.apply(this,arguments)}r(d_,R);function PUc(){return U('<div class="'+V("waffle-dataconnector-jdbcqueryeditormodule")+'"><div class="'+V("waffle-dataconnector-jdbcqueryeditormodule-sidebar")+'"></div><div class="'+V("waffle-dataconnector-jdbcqueryeditormodule-main")+'"><div class="'+V("waffle-dataconnector-jdbcqueryeditormodule-editor-wrapper")+'"></div><div class="'+V("waffle-dataconnector-jdbcqueryeditormodule-preview-button-wrapper")+'"></div></div></div>')};function QUc(){var a=""+('<div class="'+V("waffle-dataconnector-schemamenu")+'"><h4 class="'+V("waffle-dataconnector-schemamenu-header")+'">Tables</h4><div class="'+V("waffle-dataconnector-schemamenu-content")+'"></div></div>');return U(a)};function RUc(a){Uu.apply(this,arguments)}r(RUc,Uu);RUc.prototype.Ha=function(){return S(QUc)};RUc.prototype.gc=n("waffle-dataconnector-schemamenu");RUc.prototype.Pb=function(a){return En("waffle-dataconnector-schemamenu-content",a)};wa(RUc);function SUc(a){return U('<div class="'+V("waffle-dataconnector-tablesubmenu")+'"><div class="'+V("waffle-dataconnector-tablesubmenu-tablename")+'">'+T(a.UTb)+'</div><div class="'+V("waffle-dataconnector-tablesubmenu-columnwrapper")+'"></div></div>')}function TUc(a){return U('<li class="'+V("waffle-dataconnector-tablesubmenu-column")+'">'+T(a.columnName)+"</li>")};function UUc(){}r(UUc,Fs);UUc.prototype.Ha=function(a){return S(SUc,{UTb:a.getContent()})};UUc.prototype.gc=n("waffle-dataconnector-tablesubmenu");function VUc(a,b,c){var d=Jn("UL","waffle-dataconnector-tablesubmenu-columns");A(c,function(a){a=S(TUc,{columnName:a});d.appendChild(a)});Xua(b.Pb(),d)}wa(UUc);function WUc(a,b){var c=a.getName();if(M(a,2)){var d=M(a,2);XUc.contains(d)||(c=d+"."+c)}Js.call(this,c,UUc.getInstance(),b);this.uf(64,!0);this.uf(1,!1);this.uf(32,!1);this.H=a;this.F=0;this.C=null}r(WUc,Js);WUc.prototype.Ra=function(){Js.prototype.Ra.call(this);this.Pb().style.H="initial"};WUc.prototype.Gd=function(){return Js.prototype.Gd.call(this)};WUc.prototype.Pb=function(){return this.Cb("waffle-dataconnector-tablesubmenu-columnwrapper")};
WUc.prototype.aj=function(a){co(this.Za("waffle-dataconnector-tablesubmenu-columnwrapper"),a.target)||Js.prototype.aj.call(this,a)};var XUc=new ik(["dbo","public"]);function YUc(a,b,c,d){Vu.call(this,"vertical",RUc.getInstance(),d);this.H=b;this.J=c;this.C=0;this.D=new tW;this.Fa(this.D)}r(YUc,Vu);YUc.prototype.Ra=function(){Vu.prototype.Ra.call(this);this.D.render(this.getElement())};
YUc.prototype.wJa=function(a){var b=this,c=a.target;2!=c.F&&1!=c.F&&(this.J.Udb(this.H,c.H).then(function(a){b.isDisposed()||c.isDisposed()||(a=Te(a,4),VUc(c.Gd(),c,a),c.F=2,H(c.C),c.C=null)},function(){c.F=0;H(c.C);c.C=null}),c.F=1,c.C=new tW,c.Qa(c.C),c.C.render(c.getElement()),uW(c.C,!0))};function ZUc(a){2!=a.C&&1!=a.C&&($Uc(a),a.J.getTables(a.H).then(function(b){a.isDisposed()||(b=Te(b,4),aVc(a,b))},function(){a.C=0;uW(a.D,!1)}))}
function aVc(a,b){A(b,function(b){b=new WUc(b);b.render(a.Pb());a.Qa(b)});bVc(a)}function $Uc(a){a.C=1;uW(a.D,!0)}function bVc(a){a.C=2;uW(a.D,!1)}YUc.prototype.Pb=function(){return this.Za("waffle-dataconnector-schemamenu-content")};function cVc(){var a=""+('<div class="'+V("waffle-dataconnector-sqleditor")+'"><div class="'+V("waffle-dataconnector-sqleditor-textareawrapper")+'"><textarea class="'+V("waffle-dataconnector-sqleditor-textarea")+'" spellcheck="false" aria-label="'+Ft("Enter your query")+'"></textarea></div></div>');return U(a)};function e_(a,b){a=void 0===a?"":a;R.call(this,b);this.F=!0;this.D=!1;this.L=a;this.H=this.C=null;this.J=new tW;this.Qa(this.J)}r(e_,R);e_.prototype.Ha=function(){this.La=S(cVc)};e_.prototype.Ra=function(){R.prototype.Ra.call(this);this.C=this.Za("waffle-dataconnector-sqleditor-textarea");this.C.value=this.L;this.H=new kt(this.C);this.Fa(this.H);this.H.yd(this);this.J.render(this.Za("waffle-dataconnector-sqleditor-textareawrapper"));dVc(this)};
function dVc(a){a.C.disabled=!a.F||a.D;Vr(a.La,"waffle-dataconnector-sqleditor-disabled",!a.F||a.D);uW(a.J,a.D)}e_.prototype.eb=function(a){this.D||a==this.F||(this.F=a,this.Wb()&&dVc(this))};e_.prototype.isEnabled=g("F");function eVc(a){a.D=!0;a.Wb()&&dVc(a)}function fVc(a,b){a.isDisposed()||(a.D=!1,a.Wb()?(a.C.value=b,dVc(a)):a.L=b)};function gVc(a,b,c,d){d_.call(this,d);var e=this;this.C=new e_(void 0,this.Aa());this.Qa(this.C);this.D=new lxc;this.Qa(this.D);c&&(eVc(this.C),$h(c.then(function(a){return fVc(e.C,M(a,1))},function(){return fVc(e.C,"")}),function(){e.dispatchEvent("be")}));this.F=new YUc(0,a,b,d);this.Qa(this.F)}r(gVc,d_);p=gVc.prototype;p.Ha=function(){this.La=S(PUc)};
p.Ra=function(){var a=this;d_.prototype.Ra.call(this);this.F.render(this.Za("waffle-dataconnector-jdbcqueryeditormodule-sidebar"));ZUc(this.F);this.C.render(this.Za("waffle-dataconnector-jdbcqueryeditormodule-editor-wrapper"));this.D.render(this.Za("waffle-dataconnector-jdbcqueryeditormodule-preview-button-wrapper"));this.getHandler().V(this.C,"input",function(){a.dispatchEvent("be")})};p.xia=function(){var a=new qN;O(a,1,this.C.C.value);return a};p.zFa=g("D");
p.Ola=function(a){a=M(a,1);return!!a&&a==this.C.C.value};p.QLa=function(){return!!this.C.C.value};function hVc(){return U('<div class="'+V("docs-material-labeled-text-field")+'"><div class="'+V("docs-material-labeled-text-field-content")+'"></div><input type="text" class="'+V("docs-material-labeled-text-field-input")+'"></div>')};function iVc(){}r(iVc,Fs);p=iVc.prototype;p.Ha=function(a){return a.Aa().Ha("INPUT",{type:"text"})};p.Ip=function(a){Fs.prototype.Ip.call(this,a);var b=a.La;Sr(b,this.Lo(a));this.YR(b).disabled=!a.isEnabled()};p.jK=function(a){return a.Wb()?this.YR(a.La):null};p.YR=aa();p.Ph=function(a,b){Fs.prototype.Ph.call(this,a,b);if(a=a.getElement())this.YR(a).disabled=!b};wa(iVc);function jVc(){return U('<div class="'+V("docs-material-text-field")+'"><input type="text" class="'+V("docs-material-text-field-input")+'"/></div>')};function f_(){}r(f_,iVc);f_.prototype.gc=n("docs-material-text-field");f_.prototype.Ha=function(){return S(jVc)};f_.prototype.YR=function(a){return En("docs-material-text-field-input",a)};wa(f_);function kVc(){}r(kVc,f_);p=kVc.prototype;p.gc=n("docs-material-labeled-text-field");p.Ha=function(a){var b=S(hVc);b.id=a.getId();var c=En("docs-material-labeled-text-field-input",b);c.id=pr(a,"input");if(a=a.getContent())a=pvc(c,a,"docs-material-labeled-text-field-label"),Sn(this.Pb(b),a);return b};p.setContent=function(a,b){b=pvc(a,b,"docs-material-labeled-text-field-label");f_.prototype.setContent.call(this,a,b)};p.Pb=function(a){return a?En("docs-material-labeled-text-field-content",a):null};
p.YR=function(a){return En("docs-material-labeled-text-field-input",a)};wa(kVc);function lVc(a,b,c){a=void 0===a?0:a;b=b?b:iVc.getInstance();Js.call(this,void 0,b,c);var d=this;this.C="";this.F=new mn(function(){return d.Hh(null)},a)}r(lVc,Js);p=lVc.prototype;p.$a=g("C");p.fb=function(a){this.C=a;this.Wb()&&(mVc(this).value=a,nVc(this))};p.Ra=function(){Js.prototype.Ra.call(this);var a=mVc(this),b=new kt(a);this.Fa(b);var c=new Yr(a);this.Fa(c);this.getHandler().V(b,"input",this.Xma).V(c,"focusout",this.cIb);a.value=this.C;nVc(this)};
p.Xma=function(){this.C=mVc(this).value;nVc(this);this.F.start()};p.cIb=function(){this.F.wJ()};function nVc(a){var b=a.$a();null!=b&&a.Wb()&&(a=mVc(a),vla(a,b))}function mVc(a){return a.Gd().YR(a.La)};function oVc(a,b,c){a=void 0===a?0:a;b=b?b:f_.getInstance();lVc.call(this,a,b,c)}r(oVc,lVc);function pVc(a,b,c){a=void 0===a?0:a;b=b?b:kVc.getInstance();oVc.call(this,a,b,c);this.Rf(kb())}r(pVc,oVc);pVc.prototype.Ra=function(){oVc.prototype.Ra.call(this);qVc(this)};pVc.prototype.Xma=function(){oVc.prototype.Xma.call(this);qVc(this)};function qVc(a){a.Gd();var b=0!=a.$a().length;Vr(a.La,"docs-material-labeled-text-field-has-text",b)};function rVc(a,b,c){XZ.call(this,b,c);this.F=a?new pVc:new oVc;this.Qa(this.F);a&&this.F.setContent(a)}r(rVc,XZ);rVc.prototype.Ha=function(){XZ.prototype.Ha.call(this);var a=this.Aa().Ha("DIV","waffle-dataconnector-simple-text-input-prompt-text-field");Sn(this.Pb(),a);this.F.render(a)};rVc.prototype.Ra=function(){var a=this;XZ.prototype.Ra.call(this);this.getHandler().V(this.C,"action",function(){var b=a.F.$a();""!=b&&a.resolve(b)})};function sVc(){return U('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>')};function tVc(){}r(tVc,yu);tVc.prototype.Ha=function(a){a=a.Aa().Ha("DIV","waffle-dataconnector-close-badge");qt(a,sVc);return a};tVc.prototype.gc=n("waffle-dataconnector-close-badge");wa(tVc);function uVc(){Au.call(this,void 0,tVc.getInstance())}r(uVc,Au);function vVc(a,b){R.call(this,b);this.D=a;this.C=new uVc;this.Qa(this.C)}r(vVc,R);vVc.prototype.Ha=function(){var a=this.Aa().Ha("DIV","waffle-dataconnector-linked-script-chip");fo(a,this.D);Sn(a,this.Aa().Ha("DIV","waffle-dataconnector-linked-script-chip-close-badge-wrapper"));this.La=a};vVc.prototype.Ra=function(){var a=this;R.prototype.Ra.call(this);this.C.render(this.Za("waffle-dataconnector-linked-script-chip-close-badge-wrapper"));this.getHandler().V(this.C,"action",function(){return a.dispatchEvent("ce")})};function wVc(){return U('<div class="'+V("waffle-dataconnector-plxqueryeditormodule")+'"><div class="'+V("waffle-dataconnector-plxqueryeditormodule-sidebar")+'"><div class="'+V("waffle-dataconnector-plxqueryeditormodule-sidebar-header")+'">Plx</div><div class="'+V("waffle-dataconnector-plxqueryeditormodule-link-script-button-wrapper")+'"></div><div class="'+V("waffle-dataconnector-plxqueryeditormodule-script-chip-wrapper")+'"></div><div class="'+V("waffle-dataconnector-plxqueryeditormodule-engine-select-wrapper")+
'"></div></div><div class="'+V("waffle-dataconnector-plxqueryeditormodule-main")+'"><div class="'+V("waffle-dataconnector-plxqueryeditormodule-editor-wrapper")+'"></div><div class="'+V("waffle-dataconnector-plxqueryeditormodule-preview-button-wrapper")+'"></div></div></div>')};function xVc(a,b,c){d_.call(this,c);var d=this;this.J=this.H=null;this.F=new jxc("Add existing script");this.Qa(this.F);this.D=new wW;this.D.setContent("Engine");yVc(this);this.D.Af(0);this.Qa(this.D);this.C=new e_(void 0,this.Aa());this.Qa(this.C);this.L=new lxc;this.Qa(this.L);b&&(this.F.eb(!1),eVc(this.C),$h(b.then(function(a){return zVc(d,a)},function(){return zVc(d,null)}),function(){d.dispatchEvent("be")}))}r(xVc,d_);p=xVc.prototype;p.Ha=function(){this.La=S(wVc)};
p.Ra=function(){var a=this;d_.prototype.Ra.call(this);this.C.render(this.Za("waffle-dataconnector-plxqueryeditormodule-editor-wrapper"));this.L.render(this.Za("waffle-dataconnector-plxqueryeditormodule-preview-button-wrapper"));this.F.render(this.Za("waffle-dataconnector-plxqueryeditormodule-link-script-button-wrapper"));this.D.render(this.Za("waffle-dataconnector-plxqueryeditormodule-engine-select-wrapper"));this.getHandler().V(this.C,"input",function(){a.dispatchEvent("be")}).V(this.F,"action",
function(){return AVc(a)}).V(this,"ce",function(){BVc(a,null)})};p.xia=function(){var a=new qN,b=new pN;if(this.H)O(b,3,this.H);else{O(b,1,this.C.C.value);var c=this.D.hf().$a();O(b,2,c)}O(a,2,b);return a};p.zFa=g("L");p.Ola=function(a){return(a=M(a,2))?this.H?this.H==M(a,3):M(a,1)==this.C.C.value&&M(a,2)==this.D.hf().$a():!1};p.QLa=function(){return null!=this.H||!!this.C.C.value};function yVc(a){for(var b=ja(dc(CVc)),c=b.next();!c.done;c=b.next())c=c.value,a.D.Ed(new bt(c.caption,c.value))}
function AVc(a){var b=new rVc("Script ID");ls(b,"Add existing script");b.C.setContent("Add");a.Fa(b);b.setVisible(!0);$h(b.getResult().then(function(b){return BVc(a,b)},ta),function(){return H(b)})}function BVc(a,b){if(!a.isDisposed()){var c=null!=b;a.H=b;a.C.eb(!c);a.D.eb(!c);a.F.setVisible(!c);H(a.J);c&&(a.J=new vVc(b),a.Qa(a.J),a.J.render(a.Za("waffle-dataconnector-plxqueryeditormodule-script-chip-wrapper")));a.dispatchEvent("be")}}
function zVc(a,b){var c=b&&M(b,2);b=c&&M(c,1);c=c&&M(c,3);fVc(a.C,b||"");BVc(a,c);a.F.eb(!0)}var DVc=Object.freeze({caption:"Dremel",value:"DREMEL"}),EVc=Object.freeze({caption:"Procella",value:"PROCELLA"}),CVc={s$b:DVc,Vsc:EVc};function FVc(a,b){this.C=a;this.D=b;this.xb=void 0}function GVc(a,b){var c=new gVc(b,a.D,void 0,a.xb);return new c_(b,c,Jx,function(a){return HVc(b,a)},a.C,void 0,a.xb)}function IVc(a,b,c,d){d=new gVc(b,a.D,d,a.xb);return new c_(b,d,Kx,function(a){return JVc(c,a)},a.C,void 0,a.xb)}function KVc(a,b){var c=new xVc(0,void 0,a.xb);return new c_(b,c,Jx,function(a){return HVc(b,a)},a.C,void 0,a.xb)}
function LVc(a,b,c,d){d=new xVc(0,d,a.xb);return new c_(b,d,Kx,function(a){return JVc(c,a)},a.C,void 0,a.xb)}function HVc(a,b){var c=new uN;O(c,1,a);O(c,2,b);return c}function JVc(a,b){var c=new DN;O(c,1,a);O(c,2,b);return c};function MVc(a,b,c,d,e){G.call(this);var f=this;this.$=a;this.F=new jUc;this.L=new AUc(this.F);this.D=b;this.Ia=c;this.Ba=d;this.O=new FVc(e,{getTables:function(a){var b=new Kub;O(b,1,a);return f.F.getTables(b)},Udb:function(a,b){var c=new Tub;O(c,1,a);O(c,2,b);return qUc(f.F,c)}});this.C=null;this.R=new J;this.Fa(this.R);this.H=null;this.Va=new Oi(this);this.Fa(this.Va);this.va=new Rp(this);this.Fa(this.va);this.J={};this.Va.V(this.R,["show","hide"],this.Fnb).V(this.D,"K",this.KIb).V(this.D,"L",
this.DAb).V(this.D,"ca",this.CAb);this.va.subscribe(QNa,"action",this.c3).subscribe(TNa,"action",this.Gmb).subscribe(Lx,"action",this.Ixb).subscribe(Jx,"action",this.Hmb).subscribe(cOa,"action",this.Kyb).subscribe(VNa,"action",this.VOa).subscribe(ONa,"action",this.ewb).subscribe(NNa,"action",this.Ejb).subscribe(Kx,"action",this.Vob).subscribe(WNa,"action",this.Qxb).subscribe(Mx,"action",this.rmb);NVc(this)}r(MVc,G);p=MVc.prototype;p.Oa=function(){OVc(this);G.prototype.Oa.call(this)};p.Yf=function(a){this.F.Yf(a)};
function g_(a,b){H(a.C);a.C=b;a.C.yd(a.R);a.Ba.Mi(a.C);a.C.render();a.C.setVisible(!0)}p.c3=function(){OVc(this);H(this.C);this.C=null};p.KIb=function(){NVc(this)};p.DAb=function(){this.H&&(H(this.H),this.H=null,uS())};p.CAb=function(){NVc(this)};function NVc(a){if(a.D.C.C.D&&!a.H){var b=M(a.D.C.C.D,2);b=a.$.C[b]||null;b=2!=M(b,3)||lec()?b.getName():"Database connection";a.H=new UTc(b,a.D,a.Ia);a.Fa(a.H);a.H.show()}}
p.Fnb=function(){UNa.setVisible(!!this.C&&this.C.isVisible());this.C&&this.C.isVisible()||(Lx.fb(null),Mx.fb(null))};
p.UOa=function(){var a=this,b=new dUc;this.Fa(b);g_(this,b);var c={};pUc(this.F).then(function(b){Te(b,1).forEach(function(a){c[a.getId()]=(new $Tc).Rf(a.getId()).Cf(a.getName()).setType(M(a,3)).build()});return PVc(a,dc(c))}).then(function(a){if(!b.isDisposed()){var d=Te(a,1);a={};d=ja(d);for(var f=d.next();!f.done;f=d.next()){var h=f.value;f=M(h,1);h=M(h,2);var k=c[f];var l=(new $Tc).Cf(k.D).Rf(k.tc).setType(k.Hc);l.C=k.C;k=l;k.C=h;a[f]=k.build()}f=dc(a);if(!b.isDisposed()){a=b.Za("waffle-dataconnector-connectionmanager-authorized");
d=b.Za("waffle-dataconnector-connectionmanager-unauthorized");f=ja(f);for(h=f.next();!h.done;h=f.next())h=h.value,k=new bUc(h),b.F.Qa(k),k.render(h.C?a:d);eUc(b,!1)}}})};p.V4a=function(){var a=this;QVc(this).then(function(b){b=new XTc(b,2);a.Fa(b);g_(a,b)},function(){return St.getInstance().postMessage(Ut("Could not connect to Plx","error",!0))})};
function QVc(a){var b=Zh(),c=St.getInstance().postMessage(Ut("Connecting to Plx...","info",!0)),d=new rN;d.Cf("Plx");O(d,2,2);$h(kUc(a.F,d).then(function(a){a=M(a,2);b.resolve(a)},function(a){return b.reject(a)}),function(){return Tt(St.getInstance(),c)});return b.C}function PVc(a,b){var c=new bvb;b=ja(b);for(var d=b.next();!d.done;d=b.next())d=d.value.getId(),Qe(c,1,d);return rUc(a.F,c)}
p.Opa=function(a){var b="Create new "+(a.getName()+" connection");a=new iUc(b,new hUc(a,void 0),void 0,void 0);this.Fa(a);g_(this,a)};p.qSb=function(){var a=new iUc("Create new connection with custom JDBC URL",new gUc(void 0),void 0,void 0);this.Fa(a);g_(this,a)};
p.Gmb=function(a){var b=this,c=this.C;kUc(this.F,a).then(function(a){c.isDisposed()||(a=M(a,2),a=new XTc(a,1),b.Fa(a),g_(b,a))},function(a){var b=a=a instanceof tN?a:void 0;c.isDisposed()||(a=u(b)?M(b,3):0,b=u(b)?M(b,4):null,c.isDisposed()||(c.C.BNa(a),uW(c.F,!1),a=tTc(a,b),GTc(c,a)))});uW(c.F,!0);ZZ(c);c.C.xza()};p.Qxb=function(){var a=this.C,b=a.F;switch(a.C){case 2:RVc(this,b);break;case 1:SVc(this,b)}};function SVc(a,b){b=GVc(a.O,b);a.Fa(b);g_(a,b)}
function RVc(a,b){b=KVc(a.O,b);a.Fa(b);g_(a,b)}p.rmb=function(){var a=this,b=Mx.$a(),c=b.getId(),d=b.getType();switch(d){case 2:RVc(this,c);break;case 1:d=b.getName();b.C?SVc(this,c):TVc(this,c,d,function(){SVc(a,c)});break;default:throw Error("Unsupported connection type: "+d);}};
p.Ixb=function(a){var b=this,c=this.C;MUc(c,!1);ZZ(c);ITc(c,"Executing query");var d=M(a,2),e=DUc(this.L,a);this.J[e.getId()]=e;yUc(zUc(xUc(e,function(a){h_(b,e);c.isDisposed()||IUc(c,a,d)}),function(a){c.isDisposed()||(a=a.lk(),ITc(c,"Executing query",M(a,5)))}),function(a){h_(b,e);var d=a=a instanceof xN?a:void 0;c.isDisposed()||(ZZ(c),a=d?M(d.lk(),2):0,d=d?M(d.lk(),3):null,a=tTc(a,d),GTc(c,a),HUc(c))}).start()};
p.Hmb=function(a){var b=this,c=this.C,d=BUc(this.L,a);this.J[d.getId()]=d;yUc(zUc(xUc(d,function(a){h_(b,d);UVc(b,a,c)}),function(a){c.isDisposed()||OUc(c,a)}),function(){h_(b,d);c.isDisposed()}).start();NUc(c)};function UVc(a,b,c){if(!c.isDisposed()){a.c3();var d=lb(b.Jb());Number.isNaN(d);tC(a.D,d)?SF(a.D,d):a.Va.Oc(a.D,["V","K"],function(b){"V"==b.type&&b.qh==d&&SF(a.D,d)})}}
p.Kyb=function(){var a=this,b=this.D.C.C.Jb(),c=new zN;O(c,1,b.toString());var d=this.H,e=EUc(this.L,c);this.J[e.getId()]=e;yUc(xUc(e,function(){h_(a,e);d.isDisposed()||Tr(d.C.HL.getElement(),"waffle-dataconnector-bar-icon-rotating")}),function(c){h_(a,e);var f=c instanceof AN?M(c.lk(),2)||0:0;c=c instanceof AN?M(c.lk(),3):null;VVc(a,d,b,f,c)}).start();Rr(this.H.C.HL.getElement(),"waffle-dataconnector-bar-icon-rotating")};
function VVc(a,b,c,d,e){b.isDisposed()||Tr(b.C.HL.getElement(),"waffle-dataconnector-bar-icon-rotating");b=tC(a.D,c).ue();var f=xTc(d,e,b);a.Fa(f);f.render();f.setVisible(!0);$h(f.getResult().then(function(){return a.VOa(c)},ba()),function(){return H(f)})}p.VOa=function(a){if((a=u(a)?tC(this.D,a):this.D.C.C)&&a.D){var b=a.D;a=M(b,2);b=M(b,1);a=2==M(this.$.C[a]||null,3)?LVc(this.O,a,b,WVc(this,b)):IVc(this.O,a,b,WVc(this,b));this.Fa(a);g_(this,a)}};
function WVc(a,b){var c=Zh(),d=new Zub;O(d,1,b);sUc(a.F,d).then(function(a){M(a,1)?c.resolve(M(a,2)):c.reject()},function(a){return c.reject(a)});return c.C}p.Vob=function(a){var b=this,c=this.C,d=CUc(this.L,a);this.J[d.getId()]=d;yUc(zUc(xUc(d,function(){h_(b,d);c.isDisposed()||b.c3()}),function(a){c.isDisposed()||OUc(c,a)}),function(){h_(b,d)}).start();NUc(c)};function TVc(a,b,c,d){b=new OTc(b,c,d);a.Fa(b);g_(a,b)}p.ewb=function(a){var b=M(a,1);a=a.getName();TVc(this,b,a)};
p.Ejb=function(){var a=this,b=this.C,c=PTc(b);M(c,1);tUc(this.F,c).then(function(){var c=a.D.C.C;c&&c.D&&M(c.D,2);b.isDisposed()||(c=b.O,a.c3(),c())},function(){b.isDisposed()||uW(b.C,!1)});uW(b.C,!0)};function h_(a,b){if(b=a.J[b.getId()])H(b),kc(a.J,b.getId())}function OVc(a){Yb(a.J,function(b){return h_(a,b)})};function XVc(){G.call(this)}r(XVc,Ro);XVc.prototype.C=function(){return MVc};ap("dataconnector",XVc);
